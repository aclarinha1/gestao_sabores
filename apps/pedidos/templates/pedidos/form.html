{% extends 'base.html' %}
{%load static%}

{%block content%}
<main>
    <h1>Criar Novo Pedido</h1>
    
    <form method="post">
        {% csrf_token %}
        
        <!-- Informações do Pedido -->
        <h2>Informações do Pedido</h2>
        {{ form.as_p }}
        
        <!-- Itens do Pedido -->
        <h2>Itens do Pedido</h2>
        {{ formset.management_form }}
        
        <div id="items-container">
            {% for form_item in formset %}
                <div class="item-form">
                    {{ form_item.id }}
                    <div>
                        <label>Produto: {{ form_item.produto }}</label>
                    </div>
                    <div>
                        <label>Quantidade: {{ form_item.quantidade }}</label>
                    </div>
                    {% if formset.can_delete %}
                        <div>
                            {{ form_item.DELETE }} Remover este item
                        </div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
        
        <button type="button" id="add-more" class="btn btn-primary">➕ Adicionar Mais Itens</button>


        <br><br>
        <button type="submit" class="btn btn-success">Salvar</button>
        <a href="{% url 'pedidos:listar' %}" class="btn btn-secondary">Cancelar</a>
    </form>
</main>
{%endblock%}